---
# Generated from DITA source
layout: base
title: "Implementing Saxon Extension Functions"
index: "../toc.html"
commit: "1decf70762bcd757ef7a97375daa54ca55564372"
---

<nav role="toc" class="col-lg-3"><ul><li><a href="../index.html">DITA Open Toolkit 3.2</a></li><li><a href="../release-notes/index.html">Release Notes</a></li><li><a href="../topics/installing-client.html">Installing DITA-OT</a></li><li><a href="../topics/alternative-input-formats.html">Authoring formats</a></li><li><a href="../topics/building-output.html">Building output</a></li><li><a href="../parameters/index.html">Setting parameters</a></li><li><a href="../topics/customizing.html">Customizing DITA-OT</a><ul class="nav nav-list"><li><a href="../topics/html-customization.html">Customizing HTML</a></li><li><a href="../topics/pdf-customization.html">Customizing PDF</a></li><li><a href="../topics/custom-plugins.html">Working with plug-ins</a><ul class="nav nav-list"><li><a href="../topics/plugins-installing.html">Installing plug-ins</a></li><li><a href="../topics/plugins-removing.html">Removing plug-ins</a></li><li><a href="../topics/plugins-registry.html">Plug-in registry</a></li><li><a href="../topics/plugin-configfile.html">Plug-in descriptor file</a></li><li><a href="../topics/plugin-dependencies.html">Plug-in dependencies</a></li><li><a href="../topics/plugin-applications.html">Plug-in applications</a><ul class="nav nav-list"><li><a href="../topics/plugin-xmlcatalog.html">Extending an XML catalog file</a></li><li><a href="../topics/plugin-anttarget.html">Adding a new target to the Ant build process</a></li><li><a href="../topics/plugin-antpreprocess.html">Adding an Ant target to the pre-processing pipeline</a></li><li><a href="../topics/plugin-newtranstype.html">Adding a new transformation type</a></li><li><a href="../topics/plugin-overridestyle.html">Overriding an XSLT-processing step</a></li><li><a href="../topics/using-plugin-URI-extension.html">Referencing files from other plug-ins</a></li><li><a href="../topics/plugin-xsltparams.html">Adding parameters to existing XSLT steps</a></li><li><a href="../topics/plugin-javalib.html">Adding a Java library to the classpath</a></li><li><a href="../topics/plugin-messages.html">Adding new diagnostic messages</a></li><li><a href="../topics/plugin-newextensions.html">Creating a new plug-in extension point</a></li><li><a href="../topics/implement-saxon-customizations.html">Adding Saxon Customizations</a><ul class="nav nav-list"><li class="active"><a href="../topics/implement-saxon-extension-functions.html">Implementing Saxon Extension Functions</a></li><li><a href="../topics/implement-saxon-collation-uri-resolvers.html">Implementing Custom Saxon Collation URI Resolvers</a></li></ul></li></ul></li><li><a href="../topics/plugin-sample.html">Example plugin.xml file</a></li><li><a href="../topics/plugin-best-practices.html">Best practices</a></li><li><a href="../topics/plugin-coding-conventions.html">Coding conventions</a></li></ul></li><li><a href="../extension-points/plugin-extension-points.html">Extension points</a></li><li><a href="../topics/migration.html">Migrating customizations</a></li><li><a href="../topics/globalization.html">Globalizing DITA content</a></li><li><a href="../topics/rebuilding-docs.html">Rebuilding documentation</a></li></ul></li><li><a href="../topics/troubleshooting-overview.html">Troubleshooting</a></li><li><a href="../reference/index.html">Reference</a></li><li><a href="../topics/dita-and-dita-ot-resources.html">Resources</a></li></ul></nav><main role="main" class="col-lg-9"><article role="article" aria-labelledby="ariaid-title1">
    <h1 class="title topictitle1" id="ariaid-title1">Implementing Saxon Extension Functions</h1>
  
    <div class="body"><p class="shortdesc">Plug-ins can contribute Saxon extension functions for use in XSLT transforms run by the
    Open Toolkit.</p>
        <p class="p">Starting with Saxon 9.2 the mechanism for implementing extension functions has changed
      such that Saxon HE, in particular, can no longer use the older "reflexive" mechanism for
      finding Java extension functions using a magic URL. Instead you implement extension functions
      and then register them directly on the Saxon Configuration object. The Open Toolkit provides a
      dynamic mechanism for doing this registration for plug-in-provided extension functions.</p>
    <div class="p">To implement extension functions you must do the following:<ol class="ol" id="implement-saxon-extension-functions__ol_npt_5mc_vgb">
        <li class="li">Add your plugin's Java JAR file in the Toolkit's class path: <a class="xref" href="plugin-javalib.html" title="You can use the dita.conductor.lib.import extension point to add an additional Java library to the DITA-OT classpath parameter.">Adding a Java library to the DITA-OT classpath</a>.</li>
        <li class="li">For each function, implement a class that extends
            <span class="keyword">net.sf.saxon.lib.ExtensionFunctionDefinition</span>. This class provides the
          namespace name and function name for the function as well as details about its arguments
          and so on. See <span class="xref"></span> in the Saxon
          documentation.</li>
        <li class="li">Include a file named <span class="ph filepath">net.sf.saxon.lib.ExtensionFunctionDefinition</span>
          in the directory <span class="ph filepath">META-INF/services</span> in the compiled jar your plugin
          provides. Each line of the file must be the name of a class that implements
            <span class="keyword">net.sf.saxon.lib.ExtensionFunctionDefinition</span>:<pre class="pre codeblock"><code>com.example.saxon.functions.Add
com.example.saxon.functions.Substract</code></pre><div class="p">You
            can create the file using <code class="keyword markupname xmlelement">&lt;service&gt;</code> elements in an Ant
              <span class="keyword cmdname">jar</span>
            task:<pre class="pre codeblock"><code>&lt;jar destfile="${basedir}/target/lib/example-saxon.jar"&gt;
  ...
  &lt;service type="net.sf.saxon.lib.ExtensionFunctionDefinition"&gt;
    &lt;provider classname="com.example.saxon.functions.Add"/&gt;
    &lt;provider classname="com.example.saxon.functions.Subtract"/&gt;
  &lt;/service&gt;
  ...
&lt;/jar&gt;</code></pre></div></li>
        <li class="li">In your XSLT transforms declare the namespace the functions are bound
          to:<pre class="pre codeblock"><code>&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                <strong class="ph b">xmlns:eg="http://example.com/saxon-extensions"</strong>
                version="2.0"&gt;</code></pre></li>
      </ol></div>
    <div class="p">You should then be able to use the extension functions as you would any other
      function:<pre class="pre codeblock"><code>&lt;xsl:variable name="test" select="<strong class="ph b">eq:add(1, 2)</strong>"/&gt;</code></pre></div>
    </div>
</article></main>
